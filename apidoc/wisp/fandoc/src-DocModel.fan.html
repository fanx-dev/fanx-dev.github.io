<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>DocModel.fan</title>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<div class='breadcrumb'>
<ul>
<li><a href='../index.html'>Doc Index</a></li><li><a href='index.html'>fandoc</a></li><li><a href='src-DocModel.fan.html'>DocModel.fan</a></li></ul>
</div>
<div class='src'>
<pre>
<span id='line1'>//</span>
<span id='line2'>// Copyright <b>(</b>c<b>)</b> 2007, Brian Frank and Andy Frank</span>
<span id='line3'>// Licensed under the Academic Free License version 3.0</span>
<span id='line4'>//</span>
<span id='line5'>// History:</span>
<span id='line6'>//   17 Feb 07  Brian Frank  Creation</span>
<span id='line7'>//</span>
<span id='line8'></span>
<span id='line9'>**************************************************************************</span>
<span id='line10'>** DocNodeId</span>
<span id='line11'>**************************************************************************</span>
<span id='line12'></span>
<span id='line13'>@Js</span>
<span id='line14'>enum class DocNodeId</span>
<span id='line15'><b>{</b></span>
<span id='line16'>  text,</span>
<span id='line17'>  doc,</span>
<span id='line18'>  heading,</span>
<span id='line19'>  para,</span>
<span id='line20'>  pre,</span>
<span id='line21'>  blockQuote,</span>
<span id='line22'>  orderedList,</span>
<span id='line23'>  unorderedList,</span>
<span id='line24'>  listItem,</span>
<span id='line25'>  emphasis,</span>
<span id='line26'>  strong,</span>
<span id='line27'>  code,</span>
<span id='line28'>  link,</span>
<span id='line29'>  image,</span>
<span id='line30'>  hr</span>
<span id='line31'><b>}</b></span>
<span id='line32'></span>
<span id='line33'>**************************************************************************</span>
<span id='line34'>** Node</span>
<span id='line35'>**************************************************************************</span>
<span id='line36'></span>
<span id='line37'>**</span>
<span id='line38'>** DocNode is the base class for nodes in a fandoc model.</span>
<span id='line39'>** There are two type of nodes:  DocElem and DocText.</span>
<span id='line40'>**</span>
<span id='line41'>** See <b>[</b>pod doc<b>]</b>`pod-doc#api` for usage.</span>
<span id='line42'>**</span>
<span id='line43'>@Js</span>
<span id='line44'>abstract class DocNode</span>
<span id='line45'><b>{</b></span>
<span id='line46'>  **</span>
<span id='line47'>  ** Get node id for node type.</span>
<span id='line48'>  **</span>
<span id='line49'>  abstract DocNodeId id<b>(</b><b>)</b></span>
<span id='line50'></span>
<span id='line51'>  **</span>
<span id='line52'>  ** Write this node to the specified DocWriter.</span>
<span id='line53'>  **</span>
<span id='line54'>  abstract Void write<b>(</b>DocWriter out<b>)</b></span>
<span id='line55'></span>
<span id='line56'>  **</span>
<span id='line57'>  ** Is this an inline versus a block node.</span>
<span id='line58'>  **</span>
<span id='line59'>  abstract Bool isInline<b>(</b><b>)</b></span>
<span id='line60'></span>
<span id='line61'>  **</span>
<span id='line62'>  ** Is this a block element versus an inline element.</span>
<span id='line63'>  **</span>
<span id='line64'>  Bool isBlock<b>(</b><b>)</b> <b>{</b> return !isInline <b>}</b></span>
<span id='line65'></span>
<span id='line66'>  **</span>
<span id='line67'>  ** Debug dump to output stream.</span>
<span id='line68'>  **</span>
<span id='line69'>  Void dump<b>(</b>OutStream out := Env.cur.out<b>)</b></span>
<span id='line70'>  <b>{</b></span>
<span id='line71'>    html := HtmlDocWriter<b>(</b>out<b>)</b></span>
<span id='line72'>    write<b>(</b>html<b>)</b></span>
<span id='line73'>    html.out.flush</span>
<span id='line74'>  <b>}</b></span>
<span id='line75'></span>
<span id='line76'>  //////////////////////////////////////////////////////////////////////////</span>
<span id='line77'>  // Path Utilities</span>
<span id='line78'>  //////////////////////////////////////////////////////////////////////////</span>
<span id='line79'></span>
<span id='line80'>  **</span>
<span id='line81'>  ** Get the `DocElem` that contains this node.</span>
<span id='line82'>  ** Return 'null' if not parented.</span>
<span id='line83'>  **</span>
<span id='line84'>  DocElem? parent <b>{</b> internal set <b>}</b></span>
<span id='line85'></span>
<span id='line86'>  **</span>
<span id='line87'>  ** Get the path from the root of the DOM to this node.</span>
<span id='line88'>  **</span>
<span id='line89'>  virtual DocNode<b>[</b><b>]</b> path<b>(</b><b>)</b></span>
<span id='line90'>  <b>{</b></span>
<span id='line91'>    DocNode<b>[</b><b>]</b> p := <b>[</b>this<b>]</b></span>
<span id='line92'>    cur := parent</span>
<span id='line93'>    while <b>(</b>cur != null<b>)</b></span>
<span id='line94'>    <b>{</b></span>
<span id='line95'>      p.add<b>(</b>cur<b>)</b></span>
<span id='line96'>      cur = cur.parent</span>
<span id='line97'>    <b>}</b></span>
<span id='line98'>    return p.reverse</span>
<span id='line99'>  <b>}</b></span>
<span id='line100'></span>
<span id='line101'>  **</span>
<span id='line102'>  ** Get the index of this node in its parent's children.</span>
<span id='line103'>  ** Return 'null' if not parented.</span>
<span id='line104'>  **</span>
<span id='line105'>  Int? pos<b>(</b><b>)</b></span>
<span id='line106'>  <b>{</b></span>
<span id='line107'>    return parent?.children?.indexSame<b>(</b>this<b>)</b></span>
<span id='line108'>  <b>}</b></span>
<span id='line109'></span>
<span id='line110'>  **</span>
<span id='line111'>  ** Return 'true' if this node is the first child in its parent.</span>
<span id='line112'>  **</span>
<span id='line113'>  Bool isFirst<b>(</b><b>)</b></span>
<span id='line114'>  <b>{</b></span>
<span id='line115'>    return pos == 0</span>
<span id='line116'>  <b>}</b></span>
<span id='line117'></span>
<span id='line118'>  **</span>
<span id='line119'>  ** Return 'true' if this node is the last child in its parent.</span>
<span id='line120'>  **</span>
<span id='line121'>  Bool isLast<b>(</b><b>)</b></span>
<span id='line122'>  <b>{</b></span>
<span id='line123'>    return parent?.children?.last === this</span>
<span id='line124'>  <b>}</b></span>
<span id='line125'></span>
<span id='line126'>  **</span>
<span id='line127'>  ** Get all the DocText children as a string</span>
<span id='line128'>  **</span>
<span id='line129'>  abstract Str toText<b>(</b><b>)</b></span>
<span id='line130'><b>}</b></span>
<span id='line131'></span>
<span id='line132'>**************************************************************************</span>
<span id='line133'>** DocText</span>
<span id='line134'>**************************************************************************</span>
<span id='line135'></span>
<span id='line136'>**</span>
<span id='line137'>** DocText segment.</span>
<span id='line138'>**</span>
<span id='line139'>** See <b>[</b>pod doc<b>]</b>`pod-doc#api` for usage.</span>
<span id='line140'>**</span>
<span id='line141'>@Js</span>
<span id='line142'>class DocText : DocNode</span>
<span id='line143'><b>{</b></span>
<span id='line144'>  new make<b>(</b>Str str<b>)</b> <b>{</b> this.str = str <b>}</b></span>
<span id='line145'></span>
<span id='line146'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.text <b>}</b></span>
<span id='line147'></span>
<span id='line148'>  override Void write<b>(</b>DocWriter out<b>)</b></span>
<span id='line149'>  <b>{</b></span>
<span id='line150'>    out.text<b>(</b>this<b>)</b></span>
<span id='line151'>  <b>}</b></span>
<span id='line152'></span>
<span id='line153'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> true <b>}</b></span>
<span id='line154'></span>
<span id='line155'>  override Str toText<b>(</b><b>)</b> <b>{</b> str <b>}</b></span>
<span id='line156'></span>
<span id='line157'>  override Str toStr<b>(</b><b>)</b> <b>{</b> str <b>}</b></span>
<span id='line158'></span>
<span id='line159'>  Str str</span>
<span id='line160'><b>}</b></span>
<span id='line161'></span>
<span id='line162'>**************************************************************************</span>
<span id='line163'>** DocElem</span>
<span id='line164'>**************************************************************************</span>
<span id='line165'></span>
<span id='line166'>**</span>
<span id='line167'>** DocElem is a container node which models a branch of the doc tree.</span>
<span id='line168'>**</span>
<span id='line169'>** See <b>[</b>pod doc<b>]</b>`pod-doc#api` for usage.</span>
<span id='line170'>**</span>
<span id='line171'>@Js</span>
<span id='line172'>abstract class DocElem : DocNode</span>
<span id='line173'><b>{</b></span>
<span id='line174'>  **</span>
<span id='line175'>  ** Get the HTML element name to use for this element.</span>
<span id='line176'>  **</span>
<span id='line177'>  abstract Str htmlName<b>(</b><b>)</b></span>
<span id='line178'></span>
<span id='line179'>  **</span>
<span id='line180'>  ** Write this element and its children to the specified DocWriter.</span>
<span id='line181'>  **</span>
<span id='line182'>  override Void write<b>(</b>DocWriter out<b>)</b></span>
<span id='line183'>  <b>{</b></span>
<span id='line184'>    out.elemStart<b>(</b>this<b>)</b></span>
<span id='line185'>    writeChildren<b>(</b>out<b>)</b></span>
<span id='line186'>    out.elemEnd<b>(</b>this<b>)</b></span>
<span id='line187'>  <b>}</b></span>
<span id='line188'></span>
<span id='line189'>  **</span>
<span id='line190'>  ** Write this element's children to the specified DocWriter.</span>
<span id='line191'>  **</span>
<span id='line192'>  Void writeChildren<b>(</b>DocWriter out<b>)</b></span>
<span id='line193'>  <b>{</b></span>
<span id='line194'>    children.each |DocNode child| <b>{</b> child.write<b>(</b>out<b>)</b> <b>}</b></span>
<span id='line195'>  <b>}</b></span>
<span id='line196'></span>
<span id='line197'>//////////////////////////////////////////////////////////////////////////</span>
<span id='line198'>// Children</span>
<span id='line199'>//////////////////////////////////////////////////////////////////////////</span>
<span id='line200'></span>
<span id='line201'>  **</span>
<span id='line202'>  ** Get a readonly list of this elements's children.</span>
<span id='line203'>  **</span>
<span id='line204'>  DocNode<b>[</b><b>]</b> children<b>(</b><b>)</b> <b>{</b> return kids.ro <b>}</b></span>
<span id='line205'></span>
<span id='line206'>  **</span>
<span id='line207'>  ** Iterate the children nodes</span>
<span id='line208'>  **</span>
<span id='line209'>  Void eachChild<b>(</b>|DocNode| f<b>)</b> <b>{</b> kids.each<b>(</b>f<b>)</b> <b>}</b></span>
<span id='line210'></span>
<span id='line211'>  @Deprecated <b>{</b> msg = "Use add<b>(</b><b>)</b>" <b>}</b></span>
<span id='line212'>  This addChild<b>(</b>DocNode node<b>)</b> <b>{</b> add<b>(</b>node<b>)</b> <b>}</b></span>
<span id='line213'></span>
<span id='line214'>  **</span>
<span id='line215'>  ** Add a child to this node.  If adding a text node</span>
<span id='line216'>  ** it is automatically merged with the trailing text</span>
<span id='line217'>  ** node <b>(</b>if applicable<b>)</b>.  If the node is arlready parented</span>
<span id='line218'>  ** thorw ArgErr. Return this.</span>
<span id='line219'>  **</span>
<span id='line220'>  @Operator This add<b>(</b>DocNode node<b>)</b></span>
<span id='line221'>  <b>{</b></span>
<span id='line222'>    if <b>(</b>node.parent != null<b>)</b> throw ArgErr<b>(</b>"Node already parented: $node"<b>)</b></span>
<span id='line223'>    if <b>(</b>!kids.isEmpty<b>)</b></span>
<span id='line224'>    <b>{</b></span>
<span id='line225'>      last := kids.last</span>
<span id='line226'></span>
<span id='line227'>      // if adding two text nodes, then merge them</span>
<span id='line228'>      if <b>(</b>node.id === DocNodeId.text &amp;&amp; last.id === DocNodeId.text<b>)</b></span>
<span id='line229'>      <b>{</b></span>
<span id='line230'>        <b>(</b><b>(</b>DocText<b>)</b>kids.last<b>)</b>.str += <b>(</b><b>(</b>DocText<b>)</b>node<b>)</b>.str</span>
<span id='line231'>        return this</span>
<span id='line232'>      <b>}</b></span>
<span id='line233'></span>
<span id='line234'>      // two consecutive blockquotes get merged</span>
<span id='line235'>      if <b>(</b>node.id === DocNodeId.blockQuote &amp;&amp; last.id == DocNodeId.blockQuote<b>)</b></span>
<span id='line236'>      <b>{</b></span>
<span id='line237'>        DocElem elem := <b>(</b>DocElem<b>)</b>node</span>
<span id='line238'>        elem.kids.dup.each |child| <b>{</b> elem.remove<b>(</b>child<b>)</b>; last->addChild<b>(</b>child<b>)</b> <b>}</b></span>
<span id='line239'>        return this</span>
<span id='line240'>      <b>}</b></span>
<span id='line241'>    <b>}</b></span>
<span id='line242'></span>
<span id='line243'>    node.parent = this</span>
<span id='line244'>    kids.add<b>(</b>node<b>)</b></span>
<span id='line245'>    return this</span>
<span id='line246'>  <b>}</b></span>
<span id='line247'></span>
<span id='line248'>  **</span>
<span id='line249'>  ** Insert a child node at the specified index. A negative index may be</span>
<span id='line250'>  ** used to access an index from the end of the list. If adding a text node</span>
<span id='line251'>  ** it is automatically merged with surrounding text nodes <b>(</b>if applicable<b>)</b>.</span>
<span id='line252'>  ** If the node is already parented throws ArgErr.</span>
<span id='line253'>  **</span>
<span id='line254'>  This insert<b>(</b>Int index, DocNode node<b>)</b></span>
<span id='line255'>  <b>{</b></span>
<span id='line256'>    tail := DocNode<b>[</b>node<b>]</b></span>
<span id='line257'>    kids.dup.eachRange<b>(</b>index..-1<b>)</b> |child| <b>{</b> remove<b>(</b>child<b>)</b>; tail.add<b>(</b>child<b>)</b> <b>}</b></span>
<span id='line258'>    tail.each <b>{</b> add<b>(</b>it<b>)</b> <b>}</b></span>
<span id='line259'>    return this</span>
<span id='line260'>  <b>}</b></span>
<span id='line261'></span>
<span id='line262'>  **</span>
<span id='line263'>  ** Convenicence to call `add` for each node in the given list.</span>
<span id='line264'>  **</span>
<span id='line265'>  This addAll<b>(</b>DocNode<b>[</b><b>]</b> nodes<b>)</b></span>
<span id='line266'>  <b>{</b></span>
<span id='line267'>    nodes.each |node| <b>{</b> add<b>(</b>node<b>)</b> <b>}</b></span>
<span id='line268'>    return this</span>
<span id='line269'>  <b>}</b></span>
<span id='line270'></span>
<span id='line271'>  **</span>
<span id='line272'>  ** Remove a child node. If this element is not the child's</span>
<span id='line273'>  ** current parent throw ArgErr. Return this.</span>
<span id='line274'>  **</span>
<span id='line275'>  This remove<b>(</b>DocNode node<b>)</b></span>
<span id='line276'>  <b>{</b></span>
<span id='line277'>    if <b>(</b>kids.removeSame<b>(</b>node<b>)</b> == null<b>)</b> throw ArgErr<b>(</b>"not my child: $node"<b>)</b></span>
<span id='line278'>    node.parent = null</span>
<span id='line279'>    return this</span>
<span id='line280'>  <b>}</b></span>
<span id='line281'></span>
<span id='line282'>  **</span>
<span id='line283'>  ** Remove all child nodes. Return this.</span>
<span id='line284'>  **</span>
<span id='line285'>  This removeAll<b>(</b><b>)</b></span>
<span id='line286'>  <b>{</b></span>
<span id='line287'>    kids.dup.each |node| <b>{</b> remove<b>(</b>node<b>)</b> <b>}</b></span>
<span id='line288'>    return this</span>
<span id='line289'>  <b>}</b></span>
<span id='line290'></span>
<span id='line291'>  **</span>
<span id='line292'>  ** Get all the DocText children as a string</span>
<span id='line293'>  **</span>
<span id='line294'>  override Str toText<b>(</b><b>)</b></span>
<span id='line295'>  <b>{</b></span>
<span id='line296'>    s := StrBuf<b>(</b><b>)</b></span>
<span id='line297'>    kids.each |kid| <b>{</b> s.join<b>(</b>kid.toText, " "<b>)</b> <b>}</b></span>
<span id='line298'>    return s.toStr</span>
<span id='line299'>  <b>}</b></span>
<span id='line300'></span>
<span id='line301'>//////////////////////////////////////////////////////////////////////////</span>
<span id='line302'>// Path</span>
<span id='line303'>//////////////////////////////////////////////////////////////////////////</span>
<span id='line304'></span>
<span id='line305'>  **</span>
<span id='line306'>  ** Covariant override to narrow path to list of `DocElem`.</span>
<span id='line307'>  **</span>
<span id='line308'>  final override DocElem<b>[</b><b>]</b> path<b>(</b><b>)</b></span>
<span id='line309'>  <b>{</b></span>
<span id='line310'>    return super.path.map|n->DocElem| <b>{</b> <b>(</b>DocElem<b>)</b>n <b>}</b></span>
<span id='line311'>  <b>}</b></span>
<span id='line312'></span>
<span id='line313'>//////////////////////////////////////////////////////////////////////////</span>
<span id='line314'>// Fields</span>
<span id='line315'>//////////////////////////////////////////////////////////////////////////</span>
<span id='line316'></span>
<span id='line317'>  private DocNode<b>[</b><b>]</b> kids := <b>[</b>,<b>]</b></span>
<span id='line318'>  Str? anchorId</span>
<span id='line319'><b>}</b></span>
<span id='line320'></span>
<span id='line321'>**************************************************************************</span>
<span id='line322'>** Doc</span>
<span id='line323'>**************************************************************************</span>
<span id='line324'></span>
<span id='line325'>**</span>
<span id='line326'>** Doc models the top level node of a fandoc document.</span>
<span id='line327'>**</span>
<span id='line328'>@Js</span>
<span id='line329'>class Doc : DocElem</span>
<span id='line330'><b>{</b></span>
<span id='line331'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.doc <b>}</b></span>
<span id='line332'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "body" <b>}</b></span>
<span id='line333'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return false <b>}</b></span>
<span id='line334'></span>
<span id='line335'>  override Void write<b>(</b>DocWriter out<b>)</b></span>
<span id='line336'>  <b>{</b></span>
<span id='line337'>    out.docStart<b>(</b>this<b>)</b></span>
<span id='line338'>    super.write<b>(</b>out<b>)</b></span>
<span id='line339'>    out.docEnd<b>(</b>this<b>)</b></span>
<span id='line340'>  <b>}</b></span>
<span id='line341'></span>
<span id='line342'>  **</span>
<span id='line343'>  ** Recursively walk th document to build an order list of the</span>
<span id='line344'>  ** multi-level headings which can serve as a "table of contents"</span>
<span id='line345'>  ** for the document.</span>
<span id='line346'>  **</span>
<span id='line347'>  Heading<b>[</b><b>]</b> findHeadings<b>(</b><b>)</b></span>
<span id='line348'>  <b>{</b></span>
<span id='line349'>    acc := Heading<b>[</b>,<b>]</b></span>
<span id='line350'>    doFindHeadings<b>(</b>acc, this<b>)</b></span>
<span id='line351'>    return acc</span>
<span id='line352'>  <b>}</b></span>
<span id='line353'></span>
<span id='line354'>  private Void doFindHeadings<b>(</b>Heading<b>[</b><b>]</b> acc, DocElem elem<b>)</b></span>
<span id='line355'>  <b>{</b></span>
<span id='line356'>    if <b>(</b>elem is Heading<b>)</b> acc.add<b>(</b>elem<b>)</b></span>
<span id='line357'>    elem.children.each |kid| <b>{</b> if <b>(</b>kid is DocElem<b>)</b> doFindHeadings<b>(</b>acc, kid<b>)</b> <b>}</b></span>
<span id='line358'>  <b>}</b></span>
<span id='line359'></span>
<span id='line360'>  Str:Str meta := Str:Str<b>[</b>:<b>]</b></span>
<span id='line361'><b>}</b></span>
<span id='line362'></span>
<span id='line363'>**************************************************************************</span>
<span id='line364'>** Heading</span>
<span id='line365'>**************************************************************************</span>
<span id='line366'></span>
<span id='line367'>**</span>
<span id='line368'>** Heading</span>
<span id='line369'>**</span>
<span id='line370'>@Js</span>
<span id='line371'>class Heading : DocElem</span>
<span id='line372'><b>{</b></span>
<span id='line373'>  new make<b>(</b>Int level<b>)</b> <b>{</b> this.level = level <b>}</b></span>
<span id='line374'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.heading <b>}</b></span>
<span id='line375'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "h$level" <b>}</b></span>
<span id='line376'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return false <b>}</b></span>
<span id='line377'>  Str title<b>(</b><b>)</b> <b>{</b> toText <b>}</b></span>
<span id='line378'>  const Int level</span>
<span id='line379'><b>}</b></span>
<span id='line380'></span>
<span id='line381'>**************************************************************************</span>
<span id='line382'>** Para</span>
<span id='line383'>**************************************************************************</span>
<span id='line384'></span>
<span id='line385'>**</span>
<span id='line386'>** Para models a paragraph of text.</span>
<span id='line387'>**</span>
<span id='line388'>@Js</span>
<span id='line389'>class Para : DocElem</span>
<span id='line390'><b>{</b></span>
<span id='line391'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.para <b>}</b></span>
<span id='line392'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "p" <b>}</b></span>
<span id='line393'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return false <b>}</b></span>
<span id='line394'>  Str? admonition   // WARNING, NOTE, TODO, etc</span>
<span id='line395'><b>}</b></span>
<span id='line396'></span>
<span id='line397'>**************************************************************************</span>
<span id='line398'>** Pre</span>
<span id='line399'>**************************************************************************</span>
<span id='line400'></span>
<span id='line401'>**</span>
<span id='line402'>** Pre models a pre-formated code block.</span>
<span id='line403'>**</span>
<span id='line404'>@Js</span>
<span id='line405'>class Pre : DocElem</span>
<span id='line406'><b>{</b></span>
<span id='line407'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.pre <b>}</b></span>
<span id='line408'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "pre" <b>}</b></span>
<span id='line409'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return false <b>}</b></span>
<span id='line410'><b>}</b></span>
<span id='line411'></span>
<span id='line412'>**************************************************************************</span>
<span id='line413'>** BlockQuote</span>
<span id='line414'>**************************************************************************</span>
<span id='line415'></span>
<span id='line416'>**</span>
<span id='line417'>** BlockQuote models a block of quoted text.</span>
<span id='line418'>**</span>
<span id='line419'>@Js</span>
<span id='line420'>class BlockQuote : DocElem</span>
<span id='line421'><b>{</b></span>
<span id='line422'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.blockQuote <b>}</b></span>
<span id='line423'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "blockquote" <b>}</b></span>
<span id='line424'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return false <b>}</b></span>
<span id='line425'><b>}</b></span>
<span id='line426'></span>
<span id='line427'>**************************************************************************</span>
<span id='line428'>** OrderedList</span>
<span id='line429'>**************************************************************************</span>
<span id='line430'></span>
<span id='line431'>**</span>
<span id='line432'>** OrderedList models a numbered list</span>
<span id='line433'>**</span>
<span id='line434'>@Js</span>
<span id='line435'>class OrderedList : DocElem</span>
<span id='line436'><b>{</b></span>
<span id='line437'>  new make<b>(</b>OrderedListStyle style<b>)</b> <b>{</b> this.style = style <b>}</b></span>
<span id='line438'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.orderedList <b>}</b></span>
<span id='line439'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "ol" <b>}</b></span>
<span id='line440'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return false <b>}</b></span>
<span id='line441'>  OrderedListStyle style</span>
<span id='line442'><b>}</b></span>
<span id='line443'></span>
<span id='line444'>**</span>
<span id='line445'>** OrderedListStyle</span>
<span id='line446'>**</span>
<span id='line447'>@Js</span>
<span id='line448'>enum class OrderedListStyle</span>
<span id='line449'><b>{</b></span>
<span id='line450'>  number,       // 1, 2, 3, 4</span>
<span id='line451'>  upperAlpha,   // A, B, C, D</span>
<span id='line452'>  lowerAlpha,   // a, b, c, d</span>
<span id='line453'>  upperRoman,   // I, II, III, IV</span>
<span id='line454'>  lowerRoman    // i, ii, iii, iv</span>
<span id='line455'></span>
<span id='line456'>  Str htmlType<b>(</b><b>)</b></span>
<span id='line457'>  <b>{</b></span>
<span id='line458'>    switch <b>(</b>this<b>)</b></span>
<span id='line459'>    <b>{</b></span>
<span id='line460'>      case number:     return "decimal"</span>
<span id='line461'>      case upperAlpha: return "upper-alpha"</span>
<span id='line462'>      case lowerAlpha: return "lower-alpha"</span>
<span id='line463'>      case upperRoman: return "upper-roman"</span>
<span id='line464'>      case lowerRoman: return "lower-roman"</span>
<span id='line465'>      default: throw Err<b>(</b>toStr<b>)</b></span>
<span id='line466'>    <b>}</b></span>
<span id='line467'>  <b>}</b></span>
<span id='line468'></span>
<span id='line469'>  static OrderedListStyle fromFirstChar<b>(</b>Int ch<b>)</b></span>
<span id='line470'>  <b>{</b></span>
<span id='line471'>    if <b>(</b>ch == 'I'<b>)</b> return upperRoman</span>
<span id='line472'>    if <b>(</b>ch == 'i'<b>)</b> return lowerRoman</span>
<span id='line473'>    if <b>(</b>ch.isUpper<b>)</b> return upperAlpha</span>
<span id='line474'>    if <b>(</b>ch.isLower<b>)</b> return lowerAlpha</span>
<span id='line475'>    return number</span>
<span id='line476'>  <b>}</b></span>
<span id='line477'><b>}</b></span>
<span id='line478'></span>
<span id='line479'>**************************************************************************</span>
<span id='line480'>** UnorderedList</span>
<span id='line481'>**************************************************************************</span>
<span id='line482'></span>
<span id='line483'>**</span>
<span id='line484'>** UnorderedList models a bullet list</span>
<span id='line485'>**</span>
<span id='line486'>@Js</span>
<span id='line487'>class UnorderedList : DocElem</span>
<span id='line488'><b>{</b></span>
<span id='line489'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.unorderedList <b>}</b></span>
<span id='line490'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "ul" <b>}</b></span>
<span id='line491'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return false <b>}</b></span>
<span id='line492'><b>}</b></span>
<span id='line493'></span>
<span id='line494'>**************************************************************************</span>
<span id='line495'>** ListItem</span>
<span id='line496'>**************************************************************************</span>
<span id='line497'></span>
<span id='line498'>**</span>
<span id='line499'>** ListItem is an item in an OrderedList and UnorderedList.</span>
<span id='line500'>**</span>
<span id='line501'>@Js</span>
<span id='line502'>class ListItem : DocElem</span>
<span id='line503'><b>{</b></span>
<span id='line504'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.listItem <b>}</b></span>
<span id='line505'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "li" <b>}</b></span>
<span id='line506'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return false <b>}</b></span>
<span id='line507'><b>}</b></span>
<span id='line508'></span>
<span id='line509'>**************************************************************************</span>
<span id='line510'>** Emphasis</span>
<span id='line511'>**************************************************************************</span>
<span id='line512'></span>
<span id='line513'>**</span>
<span id='line514'>** Emphasis is italic text</span>
<span id='line515'>**</span>
<span id='line516'>@Js</span>
<span id='line517'>class Emphasis : DocElem</span>
<span id='line518'><b>{</b></span>
<span id='line519'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.emphasis <b>}</b></span>
<span id='line520'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "em" <b>}</b></span>
<span id='line521'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return true <b>}</b></span>
<span id='line522'><b>}</b></span>
<span id='line523'></span>
<span id='line524'>**************************************************************************</span>
<span id='line525'>** Strong</span>
<span id='line526'>**************************************************************************</span>
<span id='line527'></span>
<span id='line528'>**</span>
<span id='line529'>** Strong is bold text</span>
<span id='line530'>**</span>
<span id='line531'>@Js</span>
<span id='line532'>class Strong : DocElem</span>
<span id='line533'><b>{</b></span>
<span id='line534'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.strong <b>}</b></span>
<span id='line535'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "strong" <b>}</b></span>
<span id='line536'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return true <b>}</b></span>
<span id='line537'><b>}</b></span>
<span id='line538'></span>
<span id='line539'>**************************************************************************</span>
<span id='line540'>** Code</span>
<span id='line541'>**************************************************************************</span>
<span id='line542'></span>
<span id='line543'>**</span>
<span id='line544'>** Code is inline code</span>
<span id='line545'>**</span>
<span id='line546'>@Js</span>
<span id='line547'>class Code : DocElem</span>
<span id='line548'><b>{</b></span>
<span id='line549'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.code <b>}</b></span>
<span id='line550'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "code" <b>}</b></span>
<span id='line551'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return true <b>}</b></span>
<span id='line552'><b>}</b></span>
<span id='line553'></span>
<span id='line554'>**************************************************************************</span>
<span id='line555'>** Link</span>
<span id='line556'>**************************************************************************</span>
<span id='line557'></span>
<span id='line558'>**</span>
<span id='line559'>** Link is a hyperlink.</span>
<span id='line560'>**</span>
<span id='line561'>@Js</span>
<span id='line562'>class Link : DocElem</span>
<span id='line563'><b>{</b></span>
<span id='line564'>  new make<b>(</b>Str uri<b>)</b> <b>{</b> this.uri = uri <b>}</b></span>
<span id='line565'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.link <b>}</b></span>
<span id='line566'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "a" <b>}</b></span>
<span id='line567'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return true <b>}</b></span>
<span id='line568'></span>
<span id='line569'>  ** Is the text of the link the same as the URI string</span>
<span id='line570'>  Bool isTextUri<b>(</b><b>)</b> <b>{</b> children.first is DocText &amp;&amp; children.first.toStr == this.uri <b>}</b></span>
<span id='line571'></span>
<span id='line572'>  ** Change the text to display for the link</span>
<span id='line573'>  Void setText<b>(</b>Str text<b>)</b> <b>{</b> removeAll.add<b>(</b>DocText<b>(</b>text<b>)</b><b>)</b> <b>}</b></span>
<span id='line574'></span>
<span id='line575'>  Bool isCode := false  // when uri resolves to a type or slot</span>
<span id='line576'>  Str uri</span>
<span id='line577'>  Int line</span>
<span id='line578'><b>}</b></span>
<span id='line579'></span>
<span id='line580'>**************************************************************************</span>
<span id='line581'>** Image</span>
<span id='line582'>**************************************************************************</span>
<span id='line583'></span>
<span id='line584'>**</span>
<span id='line585'>** Image is a reference to an image file</span>
<span id='line586'>**</span>
<span id='line587'>@Js</span>
<span id='line588'>class Image : DocElem</span>
<span id='line589'><b>{</b></span>
<span id='line590'>  new make<b>(</b>Str uri, Str alt<b>)</b> <b>{</b> this.uri = uri; this.alt = alt  <b>}</b></span>
<span id='line591'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.image <b>}</b></span>
<span id='line592'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "img" <b>}</b></span>
<span id='line593'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return true <b>}</b></span>
<span id='line594'>  Str uri</span>
<span id='line595'>  Str alt</span>
<span id='line596'>  Str? size  // formatted <b>{</b>w<b>}</b>x<b>{</b>h<b>}</b></span>
<span id='line597'>  Int line</span>
<span id='line598'><b>}</b></span>
<span id='line599'></span>
<span id='line600'>**************************************************************************</span>
<span id='line601'>** Hr</span>
<span id='line602'>**************************************************************************</span>
<span id='line603'></span>
<span id='line604'>**</span>
<span id='line605'>** Hr models a horizontal rule.</span>
<span id='line606'>**</span>
<span id='line607'>@Js</span>
<span id='line608'>class Hr : DocElem</span>
<span id='line609'><b>{</b></span>
<span id='line610'>  override DocNodeId id<b>(</b><b>)</b> <b>{</b> return DocNodeId.hr <b>}</b></span>
<span id='line611'>  override Str htmlName<b>(</b><b>)</b> <b>{</b> return "hr" <b>}</b></span>
<span id='line612'>  override Bool isInline<b>(</b><b>)</b> <b>{</b> return false <b>}</b></span>
<span id='line613'><b>}</b></span>
</pre>
</div>
</body>
</html>
